#include <avr/pgmspace.h>

#ifndef traffic_h
#define traffic_h

/*
 * COMMAND[]
 * ----------
 * This table stores pre-defined Modbus RTU request frames for the
 * EM6430 three-phase energy meter.
 *
 * Each entry is an 8-byte Modbus frame (excluding slave ID),
 * stored sequentially in program memory (PROGMEM) to save SRAM.
 *
 * Frame Format (Modbus RTU):
 * -------------------------------------------------
 * Byte 0 : Slave ID            (Filled dynamically at runtime)
 * Byte 1 : Function Code       (0x03 – Read Holding Registers)
 * Byte 2 : Register Address Hi
 * Byte 3 : Register Address Lo
 * Byte 4 : Number of Registers Hi
 * Byte 5 : Number of Registers Lo
 * Byte 6 : CRC Low Byte
 * Byte 7 : CRC High Byte
 *
 * Note:
 * - Slave ID is written separately during transmission.
 * - CRC values are pre-calculated and stored in this table.
 * - Each command maps to a specific electrical parameter
 *   such as voltage, current, power, frequency, or energy.
 *
 * Access:
 * - Data must be read using pgm_read_byte_near()
 * - Direct access is not allowed since data resides in Flash.
 */
const static uint8_t COMMAND[] PROGMEM =
{
    /* Command 0 : Example – Line-to-Line Voltage */
    0x01, 0x03, 0x0F, 0x48, 0x00, 0x02, 0x47, 0x09,

    /* Command 1 */
    0x01, 0x03, 0x0F, 0x58, 0x00, 0x02, 0x46, 0xCC,

    /* Command 2 */
    0x01, 0x03, 0x0F, 0x66, 0x00, 0x02, 0x27, 0x00,

    /* Command 3 */
    0x01, 0x03, 0x0F, 0x74, 0x00, 0x02, 0x87, 0x05,

    /* Command 4 */
    0x01, 0x03, 0x0F, 0x44, 0x00, 0x02, 0x87, 0x0A,

    /* Command 5 */
    0x01, 0x03, 0x0F, 0x46, 0x00, 0x02, 0x26, 0xCA,

    /* Command 6 */
    0x01, 0x03, 0x0F, 0x54, 0x00, 0x02, 0x86, 0xCF,

    /* Command 7 */
    0x01, 0x03, 0x0F, 0x62, 0x00, 0x02, 0x66, 0xC1,

    /* Command 8 */
    0x01, 0x03, 0x0F, 0x70, 0x00, 0x02, 0xC6, 0xC4,

    /* Command 9 */
    0x01, 0x03, 0x0F, 0x56, 0x00, 0x02, 0x27, 0x0F,

    /* Command 10 */
    0x01, 0x03, 0x0F, 0x64, 0x00, 0x02, 0x86, 0xC0,

    /* Command 11 */
    0x01, 0x03, 0x0F, 0x72, 0x00, 0x02, 0x67, 0x04,

    /* Command 12 */
    0x01, 0x03, 0x0F, 0x3E, 0x00, 0x02, 0xA6, 0xD3,

    /* Command 13 */
    0x01, 0x03, 0x0F, 0x4E, 0x00, 0x02, 0xA7, 0x08,

    /* Command 14 */
    0x01, 0x03, 0x0F, 0x5C, 0x00, 0x02, 0x07, 0x0D,

    /* Command 15 */
    0x01, 0x03, 0x0F, 0x6A, 0x00, 0x02, 0xE7, 0x03,

    /* Command 16 */
    0x01, 0x03, 0x0F, 0x40, 0x00, 0x02, 0xC6, 0xCB,

    /* Command 17 */
    0x01, 0x03, 0x0F, 0x50, 0x00, 0x02, 0xC7, 0x0E,

    /* Command 18 */
    0x01, 0x03, 0x0F, 0x5E, 0x00, 0x02, 0xA6, 0xCD,

    /* Command 19 */
    0x01, 0x03, 0x0F, 0x6C, 0x00, 0x02, 0x07, 0x02,

    /* Command 20 */
    0x01, 0x03, 0x0F, 0x3C, 0x00, 0x02, 0x07, 0x13,

    /* Command 21 */
    0x01, 0x03, 0x0F, 0x4C, 0x00, 0x02, 0x06, 0xC8,

    /* Command 22 */
    0x01, 0x03, 0x0F, 0x5A, 0x00, 0x02, 0xE7, 0x0C,

    /* Command 23 */
    0x01, 0x03, 0x0F, 0x68, 0x00, 0x02, 0x46, 0xC3,

    /* Command 24 */
    0x01, 0x03, 0x0F, 0x42, 0x00, 0x02, 0x67, 0x0B,

    /* Command 25 */
    0x01, 0x03, 0x0F, 0x52, 0x00, 0x02, 0x66, 0xCE,

    /* Command 26 */
    0x01, 0x03, 0x0F, 0x60, 0x00, 0x02, 0xC7, 0x01,

    /* Command 27 */
    0x01, 0x03, 0x0F, 0x6E, 0x00, 0x02, 0xA6, 0xC2,

    /* Command 28 */
    0x01, 0x03, 0x0F, 0x4A, 0x00, 0x02, 0xE6, 0xC9,

    /* Command 29 */
    0x01, 0x03, 0x0F, 0x76, 0x00, 0x02, 0x26, 0xC5,

    /* Command 30 */
    0x01, 0x03, 0x0F, 0x78, 0x00, 0x02, 0x47, 0x06
};

#endif /* traffic_h */
